(()=>{"use strict";class e{constructor(e,t,n,s){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(t);const i=document.importNode(this.templateElement.content,!0);this.cloneElement=i.firstElementChild,s&&(this.cloneElement.id=s),this.attach(n)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.cloneElement)}}var t;!function(e){e.role="role",e.level="level",e.languages="languages",e.tools="tools",e.clear="clear"}(t||(t={}));class n{constructor(){this.listeners=[],this.initialState={role:"",level:"",languages:[],tools:[]},this.filter=this.initialState}static getInstance(){return this.instance||(this.instance=new n),this.instance}addListener(e){this.listeners.push(e)}notifyListeners(){this.listeners.forEach((e=>e(this.filter)))}getFilter(){return this.filter}setFilter(e){this.filter=Object.assign(Object.assign({},this.filter),e),this.notifyListeners()}clearFilter(){this.filter=this.initialState,this.notifyListeners()}isEmpty(){return 0===Object.keys(this.filter).length||0===Object.values(this.filter).reduce(((e,t)=>e+t.length),0)}}const s=n.getInstance();function i(e,n){switch(n){case t.role:s.setFilter(Object.assign(Object.assign({},s.getFilter()),{role:e}));break;case t.level:s.setFilter(Object.assign(Object.assign({},s.getFilter()),{level:e}));break;case t.languages:s.getFilter().languages.includes(e)?s.setFilter(s.getFilter()):s.setFilter(Object.assign(Object.assign({},s.getFilter()),{languages:[...s.getFilter().languages,e]}));break;case t.tools:s.getFilter().tools.includes(e)?s.setFilter(s.getFilter()):s.setFilter(Object.assign(Object.assign({},s.getFilter()),{tools:[...s.getFilter().tools,e]}));break;default:throw new Error("Unexpected filter case...")}}class o{constructor(e,t,n,s,i,o=!1){this.currentElement=document.createElement("button"),this.hostElement=document.getElementById(e),this.content=t,this.className=n,this.feature=i,this.handlerFn=s,this.removeWrapper=o,this.currentElement.addEventListener("click",this.handlerFn.bind(this,this.content,this.feature)),this.configure(),this.removeWrapper?this.renderRemoveWrapper():this.attach()}renderRemoveWrapper(){const e=document.createElement("section");e.classList.add("button-wrapper"),e.appendChild(this.currentElement),this.currentElement.classList.remove(this.className);const t=document.createElement("img");t.setAttribute("src","./public/icon-remove.svg"),t.setAttribute("alt","remove icon"),t.addEventListener("click",this.handlerFn.bind(this,this.content,this.feature)),e.appendChild(t),this.hostElement.appendChild(e)}configure(){this.currentElement.classList.add(this.className),this.currentElement.textContent=this.content}attach(){this.hostElement.appendChild(this.currentElement)}}class l extends e{constructor(e){super("temp-job-item","app-jobs-ul",!1,e.id.toString()),this.job=e,this.configureClonedElement(),this.renderContent()}configureClonedElement(){}renderContent(){const e=this.cloneElement.querySelector("img");null==e||e.setAttribute("src",this.job.logo.replace("./images","../../public")),null==e||e.setAttribute("alt","logo"),this.setContent("company"),this.setContent("position"),this.setContent("postedAt"),this.setContent("contract"),this.setContent("location"),this.job.new&&this.removeInactiveClass("new"),this.job.featured&&this.removeInactiveClass("featured");const n=this.cloneElement.querySelector(".job-filters");n.id=`jf-${this.job.id}`,new o(n.id,this.job.role,"filter-btn",i,t.role),new o(n.id,this.job.level,"filter-btn",i,t.level),this.job.languages.forEach((e=>{new o(n.id,e,"filter-btn",i,t.languages)})),this.job.tools.forEach((e=>{new o(n.id,e,"filter-btn",i,t.tools)}))}removeInactiveClass(e){const t=this.cloneElement.querySelector(`.${e}`);t&&t.classList.remove("inactive")}setContent(e){const t=this.cloneElement.querySelector(`.${e}`);t&&(t.textContent=this.job[e].toString())}}function r(e,n){switch(n){case t.role:s.setFilter(Object.assign(Object.assign({},s.getFilter()),{role:""}));break;case t.level:s.setFilter(Object.assign(Object.assign({},s.getFilter()),{level:""}));break;case t.languages:s.setFilter(Object.assign(Object.assign({},s.getFilter()),{languages:[...s.getFilter().languages.filter((t=>t!==e))]}));break;case t.tools:s.setFilter(Object.assign(Object.assign({},s.getFilter()),{tools:[...s.getFilter().tools.filter((t=>t!==e))]}));break;case t.clear:s.clearFilter();break;default:console.log("default")}}class a{constructor(e){this.jobs=[],this.listeners=[],this.jobs=e}static getInstance(e){return this.instance||(this.instance=new a(e)),this.instance}addListener(e){this.listeners.push(e)}notifyListener(){this.listeners.forEach((e=>e(this.jobs)))}getJobs(){return this.jobs}setJobs(e){this.jobs=e,this.notifyListener()}getFilteredJobs(e){return this.jobs.filter((t=>{let n=!0;return e.role&&(n=n&&e.role===t.role),e.level&&(n=n&&e.level===t.level),e.languages&&(n=n&&e.languages.every((e=>t.languages.includes(e)))),e.tools&&(n=n&&e.tools.every((e=>t.tools.includes(e)))),n}))}}const c=a.getInstance([{id:1,company:"Photosnap",logo:"./images/photosnap.svg",new:!0,featured:!0,position:"Senior Frontend Developer",role:"Frontend",level:"Senior",postedAt:"1d ago",contract:"Full Time",location:"USA Only",languages:["HTML","CSS","JavaScript"],tools:[]},{id:2,company:"Manage",logo:"./images/manage.svg",new:!0,featured:!0,position:"Fullstack Developer",role:"Fullstack",level:"Midweight",postedAt:"1d ago",contract:"Part Time",location:"Remote",languages:["Python"],tools:["React"]},{id:3,company:"Account",logo:"./images/account.svg",new:!0,featured:!1,position:"Junior Frontend Developer",role:"Frontend",level:"Junior",postedAt:"2d ago",contract:"Part Time",location:"USA Only",languages:["JavaScript"],tools:["React","Sass"]},{id:4,company:"MyHome",logo:"./images/myhome.svg",new:!1,featured:!1,position:"Junior Frontend Developer",role:"Frontend",level:"Junior",postedAt:"5d ago",contract:"Contract",location:"USA Only",languages:["CSS","JavaScript"],tools:[]},{id:5,company:"Loop Studios",logo:"./images/loop-studios.svg",new:!1,featured:!1,position:"Software Engineer",role:"Fullstack",level:"Midweight",postedAt:"1w ago",contract:"Full Time",location:"Worldwide",languages:["JavaScript","Ruby"],tools:["Sass"]},{id:6,company:"FaceIt",logo:"./images/faceit.svg",new:!1,featured:!1,position:"Junior Backend Developer",role:"Backend",level:"Junior",postedAt:"2w ago",contract:"Full Time",location:"UK Only",languages:["Ruby"],tools:["RoR"]},{id:7,company:"Shortly",logo:"./images/shortly.svg",new:!1,featured:!1,position:"Junior Developer",role:"Frontend",level:"Junior",postedAt:"2w ago",contract:"Full Time",location:"Worldwide",languages:["HTML","JavaScript"],tools:["Sass"]},{id:8,company:"Insure",logo:"./images/insure.svg",new:!1,featured:!1,position:"Junior Frontend Developer",role:"Frontend",level:"Junior",postedAt:"2w ago",contract:"Full Time",location:"USA Only",languages:["JavaScript"],tools:["Vue","Sass"]},{id:9,company:"Eyecam Co.",logo:"./images/eyecam-co.svg",new:!1,featured:!1,position:"Full Stack Engineer",role:"Fullstack",level:"Midweight",postedAt:"3w ago",contract:"Full Time",location:"Worldwide",languages:["JavaScript","Python"],tools:["Django"]},{id:10,company:"The Air Filter Company",logo:"./images/the-air-filter-company.svg",new:!1,featured:!1,position:"Front-end Dev",role:"Frontend",level:"Junior",postedAt:"1mo ago",contract:"Part Time",location:"Worldwide",languages:["JavaScript"],tools:["React","Sass"]}]);new class extends e{constructor(){super("temp-header","app-header",!0),this.configureClonedElement(),this.renderContent()}configureClonedElement(){}renderContent(){}},new class extends e{constructor(e){super("temp-filter","app-filter-bar",!0),this.filter=e,this.filter.addListener(this.renderContent.bind(this)),this.renderContent()}configureClonedElement(){this.cloneElement.id="section_filter-btn",!s.isEmpty()&&this.cloneElement.classList.remove("doNotDisplay"),s.isEmpty()&&this.cloneElement.classList.add("doNotDisplay")}renderContent(){this.configureClonedElement(),this.cloneElement.innerHTML="";const{role:e,level:n,languages:i,tools:l}=this.filter.getFilter();e&&new o("section_filter-btn",e,"filter-btn",r,t.role,!0),n&&new o("section_filter-btn",n,"filter-btn",r,t.level,!0),i&&i.forEach((e=>{new o("section_filter-btn",e,"filter-btn",r,t.languages,!0)})),l&&l.forEach((e=>{new o("section_filter-btn",e,"filter-btn",r,t.tools,!0)})),!s.isEmpty()&&new o("section_filter-btn","Clear","filter-clear",r,t.clear)}}(s),new class extends e{constructor(e,t){super("temp-job-list","app-jobs",!0,"app-jobs-ul"),this.jobs=e,this.filter=t,this.filter.addListener(this.renderContent.bind(this)),this.jobs.addListener(this.renderContent.bind(this)),this.renderContent()}configureClonedElement(){this.cloneElement.id="app-jobs-ul"}renderContent(){this.configureClonedElement(),this.cloneElement.innerHTML="",this.jobs.getFilteredJobs(this.filter.getFilter()).forEach((e=>new l(e)))}}(c,s),new class extends e{constructor(){super("temp-footer","app-footer",!1),this.configureClonedElement(),this.renderContent()}configureClonedElement(){this.cloneElement.classList.add("attribution"),this.cloneElement.children[0].setAttribute("href","https://www.frontendmentor.io/challenges/"),this.cloneElement.children[1].setAttribute("href","https://thanosdev.netlify.app/homepage"),this.cloneElement.children[1].textContent="Thanos Kalaitzis"}renderContent(){}}})();